bundle:
  name: dbx_poc

variables:
  brands:
    description: "Brand list"
  collection_ids:
    description: "Collection ID list"

targets:
  dev:
    default: true
    workspace:
      root_path: /Workspace/Shared/mars-odai-test/notebooks
    variables:
      brands: ["snickers", "skittles"]
      collection_ids: [
        "5e230de5cee846f18c90b39c00e94f56",
        "4de00c04d79442cfa6b8b39a00801e9a"
      ]

resources:
  jobs:
    poc_ingest_job:
      name: aprimotodbx-multibrand

      tasks:
        - for_each:
            brand: ${var.brands}
            collection: ${var.collection_ids}
          task_key: run_${each.brand}
          notebook_task:
            notebook_path: notebooks/Aprimo_to_dbx- Dev_Final.ipynb
            base_parameters:
              brand_name: ${each.brand}
              collection_id: ${each.collection}

      tags:
        env: dev
        project: aprimo
